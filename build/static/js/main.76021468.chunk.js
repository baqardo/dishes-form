(this["webpackJsonpdishes-form"]=this["webpackJsonpdishes-form"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,i){},function(e,t,i){},,function(e,t,i){},,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);var a=i(1),n=i.n(a),s=i(5),r=i.n(s),l=(i(15),i(16),i(4)),o=i.n(l),c=i(6),d=i(2),u=i(7),m=i(8),h=i(10),p=i(9),f=(i(18),i(0)),g=function(e){return Object(f.jsx)("button",{className:"button",disabled:e.disabled,children:e.children})},v=(i(20),function(e){var t="field__input";e.invalid&&(t+=" field__input--invalid");var i={input:function(){return Object(f.jsx)("input",Object(d.a)(Object(d.a)({className:t,id:e.id},e.elementConfig),{},{value:e.value,onChange:e.changed,required:!0}))},select:function(){return Object(f.jsx)("select",{className:"field__input field__input--select",id:e.id,value:e.value,onChange:e.changed,children:e.elementConfig.options.map((function(e){return Object(f.jsx)("option",{className:"field__option",value:e.value,children:e.displayValue},e.value)}))})}};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("label",{className:"field__label",htmlFor:e.id,children:e.elementConfig.placeholder}),i[e.elementType]()]})}),b=(i(21),function(e){return Object(f.jsx)("div",{className:"loader",children:"Loading..."})}),j=function(e,t){var i=!0;if(t.isRequired&&(i=""!==e.toString().trim()&&i),t.minLength&&(i=e.length>=t.minLength&&i),t.maxLength&&(i=e.length<=t.maxLength&&i),t.min&&(i=e>=t.min&&i),t.max&&(i=e<=t.max&&i),t.isNumeric){i=/^\d+$/.test(e)&&i}if(t.isFloat){var a=parseFloat(e);i=!isNaN(a)&&i}return i},y=function(e,t){return"default"===e||e===t},x=function(e,t){var i=e;return"number"===t&&(i=Number(e)),i},O=(i(22),i.p+"static/media/logo.ed5ad038.svg"),_=i.p+"static/media/wave.40eb006e.svg",C=function(e){Object(h.a)(i,e);var t=Object(p.a)(i);function i(){var e;Object(u.a)(this,i);for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isLoading:!1,isValid:!1,globalCategory:"pizza",error:null,dishForm:{name:{elementType:"input",elementConfig:{type:"text",placeholder:"Dish Name",minLength:"2"},value:"",validation:{isRequired:!0,minLength:2},isValid:!1,isTouched:!1,category:"default"},preparation_time:{elementType:"input",elementConfig:{type:"time",placeholder:"Preparation Time",step:"1"},value:"00:00:00",validation:{isRequired:!0},isValid:!1,isTouched:!1,category:"default"},type:{elementType:"select",elementConfig:{options:[{value:"pizza",displayValue:"Pizza"},{value:"soup",displayValue:"Soup"},{value:"sandwich",displayValue:"Sandwich"}],placeholder:"Dish Type"},value:"pizza",validation:{isRequired:!0},isValid:!0,isTouched:!1,category:"default"},no_of_slices:{elementType:"input",elementConfig:{type:"number",placeholder:"Number of Slices",min:1},value:"",validation:{isRequired:!0,isNumeric:!0,min:1},isValid:!1,isTouched:!1,category:"pizza"},diameter:{elementType:"input",elementConfig:{type:"number",placeholder:"Diameter",step:"0.01",min:"0.01"},value:"",validation:{isRequired:!0,isFloat:!0,min:.01},isValid:!1,isTouched:!1,category:"pizza"},spiciness_scale:{elementType:"input",elementConfig:{type:"number",placeholder:"Spiciness Scale",min:"1",max:"10"},value:"",validation:{isRequired:!0,isNumeric:!0,min:1,max:10},isValid:!1,isTouched:!1,category:"soup"},slices_of_bread:{elementType:"input",elementConfig:{type:"number",placeholder:"Slices of Bread ",min:"1"},value:"",validation:{isRequired:!0,isNumeric:!0,min:1},isValid:!1,isTouched:!1,category:"sandwich"}}},e.fieldChangeHandler=function(t,i){var a=Object(d.a)({},e.state.dishForm),n=Object(d.a)({},a[i]),s=n.elementConfig.type,r=x(t.target.value,s);n.isValid=j(r,n.validation),n.value=r,n.isTouched=!0,a[i]=n;var l=e.state.globalCategory;"type"===i&&(l=n.value),e.setState({dishForm:a,globalCategory:l,isValid:e.isFormValid(a,l)})},e.submitHandler=function(t){if(t.preventDefault(),e.state.isValid){e.setState({isLoading:!0});var i=e.giveDataToSend();e.sendDishData(i)}},e}return Object(m.a)(i,[{key:"isFormValid",value:function(e,t){var i=!0;for(var a in e){var n=this.state.dishForm[a].category;y(n,t)&&(i=e[a].isValid&&i)}return i}},{key:"giveDataToSend",value:function(){var e,t={};for(var i in this.state.dishForm){var a=this.state.dishForm[i],n=a.category;y(n,this.state.globalCategory)&&(t[i]="preparation_time"===i?(e=a.value).length<8?e+":00":e:a.value)}return t}},{key:"sendDishData",value:function(){var e=Object(c.a)(o.a.mark((function e(t){var i,a,n,s,r,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://frosty-wood-6558.getsandbox.com:443/dishes",{body:JSON.stringify(t),headers:{"Content-Type":"application/json"},method:"POST"});case 3:if(i=e.sent,a=null,!i.ok){e.next=13;break}return e.next=8,i.json();case 8:n=e.sent,this.resetFieldsValue(),console.log("Success",n),e.next=17;break;case 13:return e.next=15,i.json();case 15:for(r in s=e.sent)l=this.state.dishForm[r].elementConfig.placeholder,a={name:l,message:s[r]};case 17:this.setState({isLoading:!1,error:a}),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(0),console.log(e.t0),this.setState({isLoading:!1,error:{name:"Server",message:"Unknown Error"}});case 24:case"end":return e.stop()}}),e,this,[[0,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"resetFieldsValue",value:function(){var e=Object(d.a)({},this.state.dishForm);for(var t in this.state.dishForm){var i=Object(d.a)({},e[t]);"type"!==t&&(i.value="preparation_time"===t?"00:00:00":"",e[t]=i)}this.setState({dishForm:e})}},{key:"render",value:function(){var e=this,t=[];for(var i in this.state.dishForm){var a=this.state.dishForm[i],n=a.category;y(n,this.state.globalCategory)&&t.push({id:i,config:a})}var s=t.map((function(t){var i=t.config,a=i.elementType,n=i.elementConfig,s=i.value;return Object(f.jsx)(v,{id:t.id,elementType:a,elementConfig:n,value:s,changed:function(i){return e.fieldChangeHandler(i,t.id)},invalid:!t.config.isValid&&t.config.isTouched},t.id)}));return Object(f.jsx)("div",{className:"form-wrapper",children:Object(f.jsxs)("form",{className:"form",onSubmit:this.submitHandler,children:[Object(f.jsxs)("div",{className:"form__decorations",children:[Object(f.jsx)("img",{className:"form__wave",src:_,alt:"logo"}),Object(f.jsx)("img",{className:"form__logo",src:O,alt:""})]}),Object(f.jsx)("h1",{className:"form__title",children:"Dishes"}),s,this.state.error&&Object(f.jsxs)("p",{className:"form__error",children:[this.state.error.name,": ",this.state.error.message]}),this.state.isLoading?Object(f.jsx)(b,{}):Object(f.jsx)(g,{disabled:!this.state.isValid,children:"Submit"})]})})}}]),i}(a.Component);var T=function(){return Object(f.jsx)("div",{className:"app",children:Object(f.jsx)(C,{})})},F=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,24)).then((function(t){var i=t.getCLS,a=t.getFID,n=t.getFCP,s=t.getLCP,r=t.getTTFB;i(e),a(e),n(e),s(e),r(e)}))};r.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(T,{})}),document.getElementById("root")),F()}],[[23,1,2]]]);
//# sourceMappingURL=main.76021468.chunk.js.map